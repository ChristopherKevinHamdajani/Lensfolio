<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Group Setting</title>
    <!-- CSS only -->
    <link href="css/groupSettings.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css">
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>
</head>
<body>
<header th:replace="fragments/header"></header>
<div class="container">
    <div class="row">
        <div class="col-12 col-md-6 ps-lg-1-6 ps-xl-5">
            <div class="card shadow">
                <div class="text-start mb-1-6">
                    <h2 class="h1 mt-2 fs-1 mx-3">Group Setting</h2>
                    <br>
                    <form th:action="@{saveGroupSetting}" method="post">

                        <div class="form-floating mb-3 mx-3">
                            <label for="eventName" class="col-form-label">Event Name:</label>
                            <input onkeyup="updateCharsLeft('eventName', 'eventNameLength', 50)" maxlength="50" type="text" class="form-control" id="eventName" name="eventName">
                            <div class="name-length-message">
                                <span id="eventNameLength"></span>
                            </div>
                        </div>
                        <br>
                        <h4 class="mx-3">Repository Settings</h4>
                        <br>
                        <div class="form-floating mb-3 mx-3">
                            <input type="text" class="form-control" id="firstName1" th:name="firstName" placeholder="First name" th:value="${firstName}" minlength="1" required>
                            <label for="firstName1">First name</label>
                        </div>
                        <div class="form-floating mb-3 mx-3">
                            <input type="text" class="form-control" id="firstName2" th:name="firstName" placeholder="First name" th:value="${firstName}" minlength="1" required>
                            <label for="firstName2">First name</label>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div id="rightSide" class="col-6 col-md-6 sticky-md-top vstack gap-3">
            <div class="card shadow">
                    <div class="container">
                        <h4 class="mt-3">Group Members</h4>
                        <table class="table table-striped table-bordered display" id="table" >
                            <thead class="table-dark" id="headTable">
                            <tr>
                                <th id="firstNameColumn">First Name</th>
                                <th id="lastNameColumn">Last Name</th>
                                <th id="usernameColumn">Username</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="member : ${members}">
                                <td><span th:text="${member.FirstName}"> First Name </span></td>
                                <td><span th:text="${member.LastName}"> Last Name </span></td>
                                <td><span th:text="${member.username}"> Username </span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!--                Must have in line script here-->
                    <script>
                        $('table').dataTable({searching: false, paging: false, info: false, select: true});
                    </script>

                </div>
                <div class="card shadow">
                    <h4 class="mt-3 mx-3">Recent Activity</h4>
                </div>
            </div>
         </div>

    </div>

</div>
<script>
    //updates characters left
    function updateCharsLeft(elementId, messageElementId, numChars) {
        let chars_left = numChars - document.getElementById(elementId).value.length;
        if (chars_left === numChars) {
            document.getElementById(messageElementId).innerText = "";
        } else if (chars_left === 1) {
            document.getElementById(messageElementId).innerText = chars_left + " character left";
        } else if (chars_left === 0) {
            document.getElementById(messageElementId).innerText = "No characters left";
        } else {
            document.getElementById(messageElementId).innerText = chars_left + " characters left";
        }
    }
</script>
</body>
</html>